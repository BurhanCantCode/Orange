<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orange - Your Mac. Your Voice. Your Agent.</title>
    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Syne:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        syne: ['Syne', 'sans-serif'],
                        space: ['Space Grotesk', 'sans-serif'],
                    },
                    colors: {
                        dark: '#0A0A0A',
                        orange: '#FF6B00',
                        amber: '#FFB347',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #0A0A0A;
            color: #fff;
            margin: 0;
            overflow-x: hidden;
            font-family: 'Space Grotesk', sans-serif;
            cursor: none;
        }

        h1,
        h2,
        h3,
        .font-syne {
            font-family: 'Syne', sans-serif;
        }

        /* Custom Cursor */
        .cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(255, 107, 0, 0.8);
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            mix-blend-mode: exclusion;
            transition: width 0.3s, height 0.3s, background-color 0.3s;
        }

        .cursor-active {
            width: 60px;
            height: 60px;
            background: rgba(255, 179, 71, 1);
        }

        /* Hero Text Hover: Chromatic Aberration & Dither */
        .hero-text {
            position: relative;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .hero-text:hover {
            text-shadow:
                4px 0px 0 rgba(255, 107, 0, 0.9),
                -4px 0px 0 rgba(0, 255, 255, 0.6),
                0px 4px 0 rgba(255, 179, 71, 0.7);
            /* Fake dither effect */
            filter: contrast(150%) brightness(120%) sepia(50%) hue-rotate(-30deg);
        }

        /* CTA Liquid Hover */
        .cta-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1);
            background: transparent;
            border: 1px solid #FF6B00;
            color: #FF6B00;
        }

        .cta-btn::before {
            content: '';
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            height: 100%;
            background: #FF6B00;
            border-radius: 50% 50% 0 0;
            transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
            z-index: -1;
        }

        .cta-btn:hover {
            color: #0A0A0A;
            box-shadow: 0 0 30px rgba(255, 107, 0, 0.6);
        }

        .cta-btn:hover::before {
            top: 0;
            border-radius: 0;
        }

        /* Bento Grid Glassmorphism */
        .bento-card {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 107, 0, 0.1);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
        }

        .bento-card:hover {
            border-color: rgba(255, 107, 0, 0.3);
            box-shadow: 0 30px 60px rgba(255, 107, 0, 0.15);
        }

        /* Marquee */
        .marquee-wrapper {
            display: flex;
            white-space: nowrap;
            overflow: hidden;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 107, 0, 0.05);
            padding: 2rem 0;
        }

        .marquee {
            animation: marquee 20s linear infinite;
            display: inline-flex;
            gap: 2rem;
            padding-right: 2rem;
        }

        @keyframes marquee {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-100%);
            }
        }

        /* Shader Canvases */
        #hero-shader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -2;
            pointer-events: none;
        }

        #hero-orb {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
            pointer-events: none;
        }

        #diagram-canvas {
            width: 100%;
            height: 100%;
            min-height: 400px;
        }
    </style>
</head>

<body class="antialiased">

    <div class="cursor" id="cursor"></div>

    <!-- Hero Shaders -->
    <canvas id="hero-shader"></canvas>
    <div id="hero-orb"></div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 p-6 mix-blend-difference">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="text-2xl font-syne font-bold tracking-tight text-white flex items-center gap-2">
                <div class="w-3 h-3 rounded-full bg-orange animate-pulse"></div>
                Orange
            </div>
            <div class="text-white/60 text-sm tracking-widest uppercase font-space hidden md:block">
                macOS Native AI
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="h-screen flex flex-col items-center justify-center px-4 relative z-10">
        <div class="max-w-5xl mx-auto text-center will-change-transform" id="hero-content">
            <h1
                class="text-5xl md:text-7xl lg:text-8xl font-syne font-extrabold leading-none tracking-tighter mb-6 uppercase">
                <span class="hero-text">Your Mac.</span><br>
                <span class="hero-text text-transparent bg-clip-text bg-gradient-to-r from-orange to-amber">Your
                    Voice.</span><br>
                <span class="hero-text">Your Agent.</span>
            </h1>
            <p class="text-lg md:text-2xl text-white/50 max-w-2xl mx-auto mt-8 opacity-0 gs-reveal font-space">
                A macOS-native AI that listens to your voice and executes real actions precisely. Not a chatbot—a silent
                executor.
            </p>
        </div>
        <div class="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce opacity-50">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M19 12l-7 7-7-7" />
            </svg>
        </div>
    </section>

    <!-- How It Works Section  -->
    <section class="py-32 px-4 relative z-10 bg-dark/80 backdrop-blur-2xl border-t border-white/5" id="how-it-works">
        <div class="max-w-7xl mx-auto">
            <div class="mb-16 gs-reveal">
                <h2 class="text-4xl md:text-5xl font-syne font-bold mb-4">Architecture of Execution</h2>
                <p class="text-white/50 text-xl font-space uppercase tracking-wider">Voice Input → Planning Sidecar →
                    macOS Native Integration</p>
            </div>

            <div class="w-full h-[600px] rounded-3xl overflow-hidden glass gs-reveal bento-card relative handle-tilt"
                data-tilt>
                <div id="diagram-canvas"></div>
                <div
                    class="absolute top-8 left-8 text-white/40 text-sm uppercase tracking-widest font-syne mix-blend-difference pointer-events-none">
                    Real-time Data Flow</div>
            </div>
        </div>
    </section>

    <!-- Bento Grid Stats -->
    <section class="py-32 px-4 relative z-10" id="stats-section">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl md:text-6xl font-syne font-bold mb-16 uppercase gs-reveal text-center">Instant. Precise.
                Native.</h2>

            <div class="grid grid-cols-1 md:grid-cols-12 gap-6 auto-rows-[300px]">
                <!-- Card 1 -->
                <div class="md:col-span-8 bento-card rounded-3xl p-10 flex flex-col justify-between group handle-tilt gs-reveal"
                    data-tilt>
                    <div class="text-orange mb-4"><svg width="32" height="32" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 6v6l4 2" />
                        </svg></div>
                    <div>
                        <div class="text-6xl md:text-8xl font-syne font-bold mb-2 flex items-baseline gap-2">
                            <span class="counter" data-target="0">0</span>
                            <span class="text-2xl text-white/30">ms</span>
                        </div>
                        <h3 class="text-2xl font-syne text-white/80">Zero GUI Latency</h3>
                    </div>
                </div>

                <!-- Card 2 -->
                <div class="md:col-span-4 bento-card rounded-3xl p-10 flex flex-col justify-between group handle-tilt gs-reveal"
                    data-tilt>
                    <div class="text-amber mb-4"><svg width="32" height="32" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                            <polyline points="22 4 12 14.01 9 11.01" />
                        </svg></div>
                    <div>
                        <div class="text-6xl md:text-8xl font-syne font-bold mb-2 flex items-baseline gap-2">
                            <span class="counter" data-target="100">0</span>
                            <span class="text-2xl text-white/30">%</span>
                        </div>
                        <h3 class="text-xl font-syne text-white/80">Native Execution</h3>
                    </div>
                </div>

                <!-- Card 3 CTA -->
                <div
                    class="md:col-span-12 bento-card rounded-3xl p-10 flex flex-col md:flex-row justify-between items-center group relative overflow-hidden gs-reveal hover:border-orange transition-colors duration-500">
                    <div
                        class="absolute inset-0 bg-gradient-to-r from-orange/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-1000 pointer-events-none">
                    </div>
                    <div class="relative z-10 w-full md:w-1/2">
                        <h3 class="text-4xl md:text-5xl font-syne font-bold mb-6">Unleash Your Mac</h3>
                        <p class="text-white/60 text-lg mb-8 max-w-md font-space">Join the private beta to experience
                            the pinnacle of desktop AI integration.</p>

                        <button
                            class="cta-btn px-8 py-4 rounded-full font-bold uppercase tracking-widest text-sm hover-trigger"
                            id="cta-btn">
                            <span class="relative z-10 font-space font-bold">Try Orange</span>
                        </button>
                    </div>
                    <div class="relative z-10 md:w-1/2 flex justify-center mt-12 md:mt-0">
                        <!-- Abstract symbol pulsing -->
                        <div
                            class="w-40 h-40 rounded-full border border-orange/20 flex items-center justify-center animate-[spin_10s_linear_infinite] group-hover:border-orange/50 transition-colors duration-1000">
                            <div
                                class="w-28 h-28 rounded-full border border-amber/30 flex items-center justify-center animate-[spin_8s_linear_infinite_reverse] group-hover:border-amber/60 transition-colors duration-1000">
                                <div
                                    class="w-16 h-16 rounded-full bg-gradient-to-tr from-orange to-amber blur-[10px] group-hover:blur-[20px] transition-all duration-1000">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Marquee -->
    <footer class="mt-20 relative z-10 bg-dark overflow-hidden">
        <div class="marquee-wrapper rotate-[-2deg] scale-[1.05] bg-orange/5">
            <div class="marquee">
                <span class="text-6xl font-syne font-bold uppercase tracking-widest text-transparent"
                    style="-webkit-text-stroke: 1px rgba(255,107,0,0.5);">voice → plan → action • macOS native • always
                    listening • </span>
                <span class="text-6xl font-syne font-bold uppercase tracking-widest text-transparent"
                    style="-webkit-text-stroke: 1px rgba(255,107,0,0.5);">voice → plan → action • macOS native • always
                    listening • </span>
                <span class="text-6xl font-syne font-bold uppercase tracking-widest text-transparent"
                    style="-webkit-text-stroke: 1px rgba(255,107,0,0.5);">voice → plan → action • macOS native • always
                    listening • </span>
            </div>
        </div>
        <div class="py-12 text-center text-white/30 text-xs md:text-sm tracking-[0.3em] font-space uppercase">
            &copy; 2026 ORANGE AI. DESIGNED FOR EXECUTION.
        </div>
    </footer>

    <!-- CDN Imports -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        // --- Custom Cursor ---
        const cursor = document.getElementById('cursor');
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });

        const hoverElements = document.querySelectorAll('button, a, .hero-text, .bento-card, .hover-trigger');
        hoverElements.forEach(el => {
            el.addEventListener('mouseenter', () => cursor.classList.add('cursor-active'));
            el.addEventListener('mouseleave', () => cursor.classList.remove('cursor-active'));
        });

        // --- GSAP Cinematic Reveals ---
        const reveals = gsap.utils.toArray('.gs-reveal');
        reveals.forEach((elem) => {
            gsap.fromTo(elem,
                { y: 80, opacity: 0 },
                {
                    duration: 1.5,
                    y: 0,
                    opacity: 1,
                    ease: "power4.out",
                    scrollTrigger: {
                        trigger: elem,
                        start: "top 85%",
                        toggleActions: "play none none reverse"
                    }
                }
            );
        });

        // --- Simple 3D Card Parallax (Tilt) ---
        const tilts = document.querySelectorAll('.handle-tilt');
        tilts.forEach(card => {
            card.addEventListener('mousemove', e => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                // Subtle tilt
                const rotateX = ((y - centerY) / centerY) * -3;
                const rotateY = ((x - centerX) / centerX) * 3;

                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
            });
            card.addEventListener('mouseleave', () => {
                card.style.transform = `perspective(1000px) rotateX(0deg) rotateY(0deg)`;
            });
        });

        // --- Number Counter Animation ---
        const counters = document.querySelectorAll('.counter');
        counters.forEach(counter => {
            gsap.to(counter, {
                innerText: counter.getAttribute('data-target'),
                duration: 2.5,
                snap: { innerText: 1 },
                ease: "power3.out",
                scrollTrigger: {
                    trigger: counter,
                    start: "top 80%"
                }
            });
        });

        // --- Liquid CTA Particles Burst (Anime.js) ---
        const btn = document.getElementById('cta-btn');
        btn.addEventListener('mouseenter', (e) => {
            const rect = btn.getBoundingClientRect();
            // Burst of 20 particles
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.style.width = Math.random() * 6 + 2 + 'px';
                particle.style.height = particle.style.width;
                particle.style.background = Math.random() > 0.5 ? '#FF6B00' : '#FFB347';
                particle.style.position = 'absolute';
                particle.style.borderRadius = '50%';
                particle.style.pointerEvents = 'none';
                particle.style.zIndex = '9999'; // Above all

                // Start exactly at the mouse pointer
                particle.style.left = e.pageX + 'px';
                particle.style.top = e.pageY + 'px';

                document.body.appendChild(particle);

                anime({
                    targets: particle,
                    translateX: anime.random(-150, 150),
                    translateY: anime.random(-150, 150),
                    opacity: [1, 0],
                    scale: [0, 2],
                    duration: anime.random(800, 1500),
                    easing: 'easeOutExpo',
                    complete: () => particle.remove()
                });
            }
        });


        /** ==============================
         *  GLSL SHADER (Breathing Audio Waveform)
         *  ============================== */
        const canvasShader = document.getElementById('hero-shader');
        const gl = canvasShader.getContext('webgl');

        const vShaderStr = `
            attribute vec2 position;
            void main() { gl_Position = vec4(position, 0.0, 1.0); }
        `;
        const fShaderStr = `
            precision highp float;
            uniform vec2 u_resolution;
            uniform float u_time;
            
            // Simplex-ish noise
            float random (vec2 st) {
                return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);
            }
            float noise (in vec2 st) {
                vec2 i = floor(st);
                vec2 f = fract(st);
                float a = random(i);
                float b = random(i + vec2(1.0, 0.0));
                float c = random(i + vec2(0.0, 1.0));
                float d = random(i + vec2(1.0, 1.0));
                vec2 u = f*f*(3.0-2.0*f);
                return mix(a, b, u.x) + (c - a)* u.y * (1.0 - u.x) + (d - b) * u.x * u.y;
            }

            void main() {
                vec2 uv = gl_FragCoord.xy / u_resolution.xy;
                uv.x *= u_resolution.x / u_resolution.y;
                
                vec3 col = vec3(0.04, 0.04, 0.04); // Deep black/gray abyss
                
                // Draw 3 pulsing sine waves
                for(float i = 0.0; i < 3.0; i++) {
                    uv.x += noise(uv * 2.0 + u_time * 0.1) * 0.05;
                    float wave = sin(uv.x * (5.0 + i * 2.0) - u_time * (1.0 + i * 0.5)) * 0.15;
                    // Pulse breathing
                    wave *= (sin(u_time * 0.5 + i) * 0.5 + 1.0);
                    
                    float thickness = 0.005 / abs(uv.y - 0.5 - wave);
                    thickness = smoothstep(0.0, 1.0, thickness);

                    // Fade out on edges
                    thickness *= smoothstep(0.0, 0.5, uv.x) * smoothstep(uv.x, uv.x + 0.5, u_resolution.x/u_resolution.y);
                    
                    vec3 waveCol = vec3(1.0, 0.42, 0.0); // Orange
                    col += waveCol * thickness * (0.8 - i * 0.2);
                }
                
                // Add dither / noise grain globally
                float dither = (random(uv * 1000.0) - 0.5) * 0.08;
                col += dither;

                // Heavy vignette
                float dist = distance(gl_FragCoord.xy / u_resolution.xy, vec2(0.5));
                col *= smoothstep(1.0, 0.2, dist * 1.5);

                gl_FragColor = vec4(col, 1.0);
            }
        `;

        const compileShader = (type, source) => {
            const shader = gl.createShader(type);
            gl.shaderSource(shader, source);
            gl.compileShader(shader);
            return shader;
        };

        const program = gl.createProgram();
        gl.attachShader(program, compileShader(gl.VERTEX_SHADER, vShaderStr));
        gl.attachShader(program, compileShader(gl.FRAGMENT_SHADER, fShaderStr));
        gl.linkProgram(program);
        gl.useProgram(program);

        const positionData = new Float32Array([-1, -1, 1, -1, -1, 1, -1, 1, 1, -1, 1, 1]);
        const buffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
        gl.bufferData(gl.ARRAY_BUFFER, positionData, gl.STATIC_DRAW);
        const positionLoc = gl.getAttribLocation(program, "position");
        gl.enableVertexAttribArray(positionLoc);
        gl.vertexAttribPointer(positionLoc, 2, gl.FLOAT, false, 0, 0);

        const uRes = gl.getUniformLocation(program, "u_resolution");
        const uTime = gl.getUniformLocation(program, "u_time");

        const resizeShader = () => {
            canvasShader.width = window.innerWidth;
            canvasShader.height = window.innerHeight;
            gl.viewport(0, 0, canvasShader.width, canvasShader.height);
        };
        window.addEventListener('resize', resizeShader);
        resizeShader();

        let startTime = Date.now();
        const renderShader = () => {
            gl.uniform2f(uRes, canvasShader.width, canvasShader.height);
            gl.uniform1f(uTime, (Date.now() - startTime) / 1000);
            gl.drawArrays(gl.TRIANGLES, 0, 6);
            requestAnimationFrame(renderShader);
        }
        renderShader();

        /** ==============================
         *  THREE.JS HERO ORB
         *  ============================== */
        const orbContainer = document.getElementById('hero-orb');
        const sceneOrb = new THREE.Scene();
        // Camera positioned to place orb on the right side
        const cameraOrb = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        const rendererOrb = new THREE.WebGLRenderer({ alpha: true, antialias: true });

        rendererOrb.setSize(window.innerWidth, window.innerHeight);
        rendererOrb.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        orbContainer.appendChild(rendererOrb.domElement);

        // Orb Geometry
        const geoOrb = new THREE.IcosahedronGeometry(2, 3);
        const matOrb = new THREE.MeshBasicMaterial({
            color: 0xFF6B00,
            wireframe: true,
            transparent: true,
            opacity: 0.15,
        });
        const meshOrb = new THREE.Mesh(geoOrb, matOrb);
        // Position on the right side
        const getOrbX = () => window.innerWidth > 768 ? 4 : 0;
        meshOrb.position.set(getOrbX(), 0, -8);
        sceneOrb.add(meshOrb);

        // Inner solid core
        const coreGeoOrb = new THREE.SphereGeometry(1.2, 32, 32);
        const coreMatOrb = new THREE.MeshBasicMaterial({
            color: 0x0A0A0A,
            transparent: true,
            opacity: 0.95
        });
        const coreMeshOrb = new THREE.Mesh(coreGeoOrb, coreMatOrb);
        coreMeshOrb.position.copy(meshOrb.position);
        sceneOrb.add(coreMeshOrb);

        // Ambient glow points
        const partsGeo = new THREE.BufferGeometry();
        const partsCount = 200;
        const posArray = new Float32Array(partsCount * 3);
        for (let i = 0; i < partsCount; i++) {
            const r = 2.0 + Math.random() * 2.0;
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.acos(2 * Math.random() - 1);
            posArray[i * 3] = r * Math.sin(phi) * Math.cos(theta);
            posArray[i * 3 + 1] = r * Math.sin(phi) * Math.sin(theta);
            posArray[i * 3 + 2] = r * Math.cos(phi);
        }
        partsGeo.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const partsMat = new THREE.PointsMaterial({
            size: 0.03,
            color: 0xFFB347,
            transparent: true,
            opacity: 0.8
        });
        const partsMesh = new THREE.Points(partsGeo, partsMat);
        partsMesh.position.copy(meshOrb.position);
        sceneOrb.add(partsMesh);

        let mouseX = 0;
        let mouseY = 0;
        document.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX / window.innerWidth - 0.5) * 2;
            mouseY = -(e.clientY / window.innerHeight - 0.5) * 2;
        });

        const animateOrb = () => {
            requestAnimationFrame(animateOrb);
            meshOrb.rotation.y += 0.002;
            meshOrb.rotation.x += 0.001;
            partsMesh.rotation.y -= 0.001;
            partsMesh.rotation.z += 0.001;

            // Mouse parallax subtle wobble
            const targetX = getOrbX() + mouseX * 0.5;
            const targetY = mouseY * 0.5;

            meshOrb.position.x += (targetX - meshOrb.position.x) * 0.05;
            meshOrb.position.y += (targetY - meshOrb.position.y) * 0.05;

            coreMeshOrb.position.copy(meshOrb.position);
            partsMesh.position.copy(meshOrb.position);

            rendererOrb.render(sceneOrb, cameraOrb);
        };
        animateOrb();

        /** ==============================
         *  THREE.JS ARCHITECTURE DIAGRAM
         *  ============================== */
        const diagContainer = document.getElementById('diagram-canvas');
        if (diagContainer) {
            const sceneDiag = new THREE.Scene();
            const cameraDiag = new THREE.PerspectiveCamera(45, diagContainer.clientWidth / diagContainer.clientHeight, 0.1, 100);
            const rendererDiag = new THREE.WebGLRenderer({ alpha: true, antialias: true });

            rendererDiag.setSize(diagContainer.clientWidth, diagContainer.clientHeight);
            rendererDiag.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            diagContainer.appendChild(rendererDiag.domElement);
            cameraDiag.position.z = 12;
            cameraDiag.position.y = 2; // Look down slightly
            cameraDiag.lookAt(0, 0, 0);

            // Three Nodes
            const nodeMat = new THREE.MeshBasicMaterial({ color: 0xFF6B00, wireframe: true, transparent: true, opacity: 0.8 });

            // 1. Voice
            const geo1 = new THREE.IcosahedronGeometry(0.8, 1);
            const node1 = new THREE.Mesh(geo1, nodeMat);
            node1.position.set(-5, 0, 0);
            sceneDiag.add(node1);

            // 2. Planning (Cube)
            const geo2 = new THREE.BoxGeometry(1.2, 1.2, 1.2);
            const node2Mat = new THREE.MeshBasicMaterial({ color: 0xFFB347, wireframe: true, transparent: true, opacity: 0.5 });
            const node2 = new THREE.Mesh(geo2, node2Mat);
            node2.position.set(0, 0.5, 0); // slightly elevated

            const core2 = new THREE.Mesh(new THREE.BoxGeometry(0.5, 0.5, 0.5), new THREE.MeshBasicMaterial({ color: 0xFF6B00 }));
            node2.add(core2);
            sceneDiag.add(node2);

            // 3. macOS Native
            const geo3 = new THREE.OctahedronGeometry(0.8, 0);
            const node3 = new THREE.Mesh(geo3, nodeMat);
            node3.position.set(5, 0, 0);
            sceneDiag.add(node3);

            // Connecting curved lines
            const curve1 = new THREE.QuadraticBezierCurve3(
                node1.position,
                new THREE.Vector3(-2.5, 2, 0),
                node2.position
            );
            const curve2 = new THREE.QuadraticBezierCurve3(
                node2.position,
                new THREE.Vector3(2.5, -1, 0),
                node3.position
            );

            const points1 = curve1.getPoints(50);
            const points2 = curve2.getPoints(50);

            const lineMat = new THREE.LineBasicMaterial({ color: 0xFF6B00, transparent: true, opacity: 0.3 });

            const line1 = new THREE.Line(new THREE.BufferGeometry().setFromPoints(points1), lineMat);
            const line2 = new THREE.Line(new THREE.BufferGeometry().setFromPoints(points2), lineMat);

            sceneDiag.add(line1);
            sceneDiag.add(line2);

            // Moving Particles on lines
            const pGeo = new THREE.SphereGeometry(0.1, 8, 8);
            const pMat = new THREE.MeshBasicMaterial({ color: 0xFFFFFF });

            const p1 = new THREE.Mesh(pGeo, pMat);
            const p2 = new THREE.Mesh(pGeo, pMat);
            sceneDiag.add(p1);
            sceneDiag.add(p2);

            let diagTime = 0;
            const animateDiag = () => {
                requestAnimationFrame(animateDiag);

                node1.rotation.y += 0.01;
                node1.rotation.x += 0.005;

                node2.rotation.x += 0.01;
                node2.rotation.y += 0.01;
                core2.rotation.y -= 0.02;

                node3.rotation.z -= 0.01;
                node3.rotation.y += 0.01;

                diagTime += 0.005;
                const t1 = (diagTime % 1); // 0 to 1
                const t2 = ((diagTime + 0.5) % 1); // Offset particle

                // particle 1 moves from voice -> sidecar
                curve1.getPoint(t1, p1.position);
                // particle 2 moves from sidecar -> mac
                curve2.getPoint(t2, p2.position);

                rendererDiag.render(sceneDiag, cameraDiag);
            };

            // Use Intersection Observer so it only renders when visible to save CPU
            let observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        animateDiag();
                    }
                });
            });
            observer.observe(diagContainer);
        }

        window.addEventListener('resize', () => {
            // Orb
            cameraOrb.aspect = window.innerWidth / window.innerHeight;
            cameraOrb.updateProjectionMatrix();
            rendererOrb.setSize(window.innerWidth, window.innerHeight);

            // Diag
            if (diagContainer) {
                const cameraDiag = sceneDiag.cameras ? sceneDiag.cameras[0] : null;
                const rendererDiag = diagContainer.children[0]; // canvas
                // Basic resize handling
            }
        });

    </script>
</body>

</html>