<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orange | Your Mac. Your Voice. Your Agent.</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Syne:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- CDNs -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        black: '#0A0A0A',
                        orange: '#FF6B00',
                        amber: '#FFB347',
                        offwhite: '#F5F5F7'
                    },
                    fontFamily: {
                        syne: ['Syne', 'sans-serif'],
                        space: ['Space Grotesk', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        :root {
            --bg: #0A0A0A;
            --orange: #FF6B00;
            --amber: #FFB347;
        }

        body {
            background-color: var(--bg);
            color: #F5F5F7;
            overflow-x: hidden;
            margin: 0;
            cursor: none;
        }

        /* Custom Cursor */
        .cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(255, 107, 0, 0.8);
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            mix-blend-mode: exclusion;
            transition: width 0.3s, height 0.3s, background-color 0.3s;
            will-change: width, height, background-color, transform;
        }

        .cursor-active {
            width: 80px;
            height: 80px;
            background: rgba(255, 179, 71, 1);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 107, 0, 0.3);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--orange);
        }

        /* WebGL Background */
        #webgl-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
            pointer-events: none;
        }

        /* Dithering / Noise Overlay */
        .noise-overlay {
            position: fixed;
            inset: 0;
            z-index: 50;
            pointer-events: none;
            mix-blend-mode: overlay;
            opacity: 0.15;
            background: url('data:image/svg+xml;utf8,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noiseFilter)"/></svg>');
        }

        /* Chromatic Aberration Hover */
        .hover-target {}

        /* for JS tracking */
        .chromatic-hover {
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), text-shadow 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            display: inline-block;
        }

        .chromatic-hover:hover {
            transform: skewX(-2deg) scale(1.02);
            text-shadow:
                4px 0px 0px rgba(255, 107, 0, 0.8),
                -4px 0px 0px rgba(0, 200, 255, 0.8);
        }

        /* Bento Cards */
        .bento-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0.01));
            border: 1px solid rgba(255, 107, 0, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 1.5rem;
            transition: border-color 0.4s ease, box-shadow 0.4s ease, transform 0.1s ease-out;
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
        }

        .bento-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at top left, rgba(255, 107, 0, 0.1), transparent 40%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .bento-card:hover {
            border-color: rgba(255, 107, 0, 0.4);
            box-shadow: 0 20px 40px -10px rgba(255, 107, 0, 0.15);
        }

        .bento-card:hover::before {
            opacity: 1;
        }

        /* Liquid Mercury / Gooey Effect for CTA */
        .goo-filter {
            filter: url('#goo');
        }

        /* Marquee */
        .marquee-container {
            display: flex;
            width: 200%;
            animation: marquee 20s linear infinite;
        }

        @keyframes marquee {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        /* Utility */
        .reveal {
            visibility: hidden;
        }

        .magnetic-wrap {
            display: inline-block;
            cursor: none;
        }
    </style>
</head>

<body class="font-space antialiased selection:bg-orange selection:text-black">

    <div class="cursor" id="cursor"></div>

    <!-- Global SVG Filters -->
    <svg style="visibility: hidden; position: absolute;" width="0" height="0" xmlns="http://www.w3.org/2000/svg"
        version="1.1">
        <defs>
            <filter id="goo">
                <feGaussianBlur in="SourceGraphic" stdDeviation="8" result="blur" />
                <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9"
                    result="goo" />
                <feComposite in="SourceGraphic" in2="goo" operator="atop" />
            </filter>
        </defs>
    </svg>

    <div id="webgl-container"></div>
    <div class="noise-overlay"></div>

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 w-full z-40 px-8 py-6 flex justify-between items-center mix-blend-difference">
        <div class="font-syne font-bold text-xl tracking-tighter text-white hover-target inline-block"
            style="cursor:none;">ORANGE</div>
        <div class="font-space text-xs tracking-widest text-white/70 uppercase">v1.0.0 Alpha</div>
    </nav>

    <main class="relative z-10 w-full">

        <!-- HERO SECTION -->
        <section id="hero" class="h-screen w-full flex flex-col justify-center px-8 md:px-24 pt-32">
            <div class="max-w-5xl z-10 pointer-events-auto mt-12">
                <p class="font-space text-orange uppercase tracking-[0.3em] text-xs mb-6 reveal">Macos-Native Voice
                    Agent</p>
                <h1
                    class="font-syne font-extrabold text-5xl md:text-7xl lg:text-[6rem] leading-[0.9] text-offwhite uppercase">
                    <span class="block reveal"><span class="chromatic-hover hover-target">Your Mac.</span></span>
                    <span class="block reveal"><span class="chromatic-hover hover-target">Your Voice.</span></span>
                    <span class="block reveal text-orange drop-shadow-[0_0_30px_rgba(255,107,0,0.4)]"><span
                            class="chromatic-hover hover-target">Your Agent.</span></span>
                </h1>
                <p class="font-space text-lg md:text-xl text-white/60 mt-10 max-w-lg leading-relaxed reveal">
                    Bypass the UI. Speak naturally. Orange executes complex workflows directly on your native macOS
                    environment with raw AI precision.
                </p>
            </div>

            <!-- Scroll Indicator -->
            <div
                class="absolute bottom-10 left-8 md:left-24 font-space text-xs tracking-widest text-white/40 uppercase animate-pulse">
                Scroll to initialize
            </div>
        </section>

        <!-- HOW IT WORKS (Diagram overlay) -->
        <section id="diagram" class="min-h-screen w-full flex items-center px-8 md:px-24 pointer-events-none relative">
            <div class="w-full flex justify-between items-center z-10">
                <!-- Text elements mapping to the 3D nodes behind them -->
                <div class="w-1/3 reveal">
                    <h3 class="font-syne text-3xl font-bold text-white mb-2">01. Voice</h3>
                    <p class="font-space text-white/50 text-sm w-48">Natural language captured globally via custom
                        shortcut.</p>
                </div>
                <div class="w-1/3 flex flex-col items-center text-center reveal">
                    <h3 class="font-syne text-3xl font-bold text-orange mb-2">02. Plan</h3>
                    <p class="font-space text-white/50 text-sm w-48">LLM Sidecar breaks request into executable atomic
                        tasks.</p>
                </div>
                <div class="w-1/3 flex flex-col items-end text-right reveal">
                    <h3 class="font-syne text-3xl font-bold text-white mb-2">03. Action</h3>
                    <p class="font-space text-white/50 text-sm w-48">Native execution via Accessibility APIs &
                        AppleScript.</p>
                </div>
            </div>
        </section>

        <!-- BENTO GRID FEATURES -->
        <section id="bento"
            class="min-h-screen w-full px-8 md:px-24 py-24 flex items-center z-20 relative pointer-events-auto">
            <div class="w-full max-w-7xl mx-auto">
                <h2 class="font-syne text-5xl md:text-6xl font-bold mb-12 reveal">Instant. Precise. Native.</h2>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 auto-rows-[280px]">
                    <!-- Card 1 -->
                    <div
                        class="bento-card hover-target col-span-1 md:col-span-2 p-10 flex flex-col justify-between reveal group">
                        <div class="flex justify-between items-start">
                            <h3 class="font-syne text-3xl font-semibold">Execution Latency</h3>
                            <div
                                class="w-12 h-12 rounded-full border border-orange/30 flex items-center justify-center text-orange group-hover:bg-orange group-hover:text-black transition-colors">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
                                </svg>
                            </div>
                        </div>
                        <div class="flex items-baseline gap-2">
                            <span class="text-7xl font-space font-bold text-orange count-ms">0</span>
                            <span class="text-xl font-space text-white/50">ms</span>
                        </div>
                        <p class="font-space text-white/60 text-sm w-2/3" style="transform: translateZ(20px);">Local
                            processing hybrid architecture ensures near-instant response times.</p>
                    </div>

                    <!-- Card 2 -->
                    <div class="bento-card hover-target col-span-1 p-10 flex flex-col justify-between reveal">
                        <h3 class="font-syne text-2xl font-semibold">Native Hooks</h3>
                        <div class="flex items-baseline gap-1 my-4">
                            <span class="text-6xl font-space font-bold text-amber count-apps">0</span>
                            <span class="text-3xl font-space text-amber">+</span>
                        </div>
                        <p class="font-space text-white/60 text-sm">Deeply integrated with core macOS apps and UI
                            elements automatically.</p>
                    </div>

                    <!-- Card 3 -->
                    <div class="bento-card hover-target col-span-1 p-10 flex flex-col justify-between reveal">
                        <h3 class="font-syne text-2xl font-semibold">Always Ready</h3>
                        <div class="my-auto">
                            <div class="w-full h-2 bg-white/10 rounded-full overflow-hidden">
                                <div
                                    class="h-full bg-orange w-full origin-left animate-[pulse_2s_ease-in-out_infinite]">
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="w-3 h-3 bg-green-500 rounded-full shadow-[0_0_10px_#22c55e]"></div>
                            <span class="font-space text-sm text-white/80">Background daemon active</span>
                        </div>
                    </div>

                    <!-- Card 4 -->
                    <div
                        class="bento-card hover-target col-span-1 md:col-span-2 p-10 flex flex-col justify-between reveal overflow-hidden relative">
                        <!-- Abstract Code background -->
                        <div
                            class="absolute inset-0 opacity-10 font-mono text-xs p-4 leading-loose pointer-events-none select-none text-orange overflow-hidden">
                            async function executePlan(plan) {<br>
                            &nbsp;&nbsp;const nodes = plan.parse();<br>
                            &nbsp;&nbsp;for (const node of nodes) {<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;await macOS.dispatch(node.intent);<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;await memory.commit(node.state);<br>
                            &nbsp;&nbsp;}<br>
                            &nbsp;&nbsp;return Context.Success;<br>
                            }
                        </div>
                        <h3 class="font-syne text-3xl font-semibold relative z-10">Smart Context</h3>
                        <div class="relative z-10 flex items-baseline gap-2 mt-4">
                            <span class="text-7xl font-space font-bold text-white count-context">0</span>
                            <span class="text-xl font-space text-white/50">%</span>
                        </div>
                        <p class="font-space text-white/60 text-sm w-3/4 relative z-10 mt-4">Screen awareness allows
                            Orange to know exactly what you're looking at, meaning you can say "Summarize this" and it
                            just works.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA SECTION -->
        <section id="cta"
            class="min-h-screen w-full flex flex-col justify-center items-center relative z-20 pointer-events-auto">
            <h2 class="font-syne text-5xl md:text-7xl font-bold mb-16 text-center reveal hover-target">Command your
                machine.</h2>

            <div class="magnetic-wrap hover-target" id="cta-button-wrap">
                <button
                    class="relative px-16 py-8 rounded-full font-syne font-bold text-3xl text-black bg-orange overflow-hidden group goo-filter transition-colors duration-500 hover:text-white"
                    id="cta-button">
                    <span
                        class="relative z-10 pointer-events-none mix-blend-color-burn group-hover:mix-blend-normal transition-all duration-300">Try
                        Orange</span>

                    <!-- Liquid Mercury internal fill -->
                    <div
                        class="absolute inset-0 bg-amber rounded-full scale-0 group-hover:scale-[1.5] transition-transform duration-700 ease-out z-0 origin-center">
                    </div>
                    <div
                        class="absolute inset-0 bg-black rounded-full scale-0 group-hover:scale-[1.1] transition-transform duration-700 delay-100 ease-out z-0 origin-center">
                    </div>
                </button>
            </div>
        </section>

        <!-- FOOTER MARQUEE -->
        <!-- WAITLIST SECTION -->
        <section id="waitlist" class="mx-auto max-w-6xl px-6 pb-14 pt-24 md:px-10 relative z-20 pointer-events-auto">
            <div class="grid gap-10 md:grid-cols-[1.2fr_1fr]">
                <div class="reveal">
                    <p
                        class="inline-flex rounded-full border border-orange/30 bg-orange/10 px-3 py-1 text-xs uppercase tracking-[0.18em] text-orange">
                        Private Beta - BYOK Anthropic
                    </p>
                    <h2
                        class="mt-6 font-syne text-5xl font-semibold leading-tight md:text-6xl text-offwhite hover-target">
                        Install Orange, add your Anthropic key, and run commands across Mac apps.
                    </h2>
                    <p class="mt-5 max-w-xl text-base text-white/75 md:text-lg font-space">
                        No payments or account plans in this phase. Orange is local-first with a bundled sidecar runtime
                        and safety confirmations for risky actions.
                    </p>

                    <div class="mt-8 flex flex-wrap items-center gap-3">
                        <a href="/download"
                            class="hover-target rounded-xl bg-orange px-5 py-3 text-sm font-semibold text-black transition hover:bg-amber text-center">
                            Download Beta DMG
                        </a>
                        <a href="/pricing"
                            class="hover-target rounded-xl border border-white/25 px-5 py-3 text-sm font-semibold text-white transition hover:border-orange hover:text-orange text-center">
                            BYOK Details
                        </a>
                    </div>

                    <div class="mt-10 grid gap-3 sm:grid-cols-3 font-space">
                        <div class="rounded-2xl border border-white/15 bg-black/25 px-4 py-3 backdrop-blur-md">
                            <p class="text-xs uppercase tracking-[0.16em] text-white/50">Latency target</p>
                            <p class="mt-1 text-lg font-semibold text-amber">p95 &lt; 4s</p>
                        </div>
                        <div class="rounded-2xl border border-white/15 bg-black/25 px-4 py-3 backdrop-blur-md">
                            <p class="text-xs uppercase tracking-[0.16em] text-white/50">Distribution</p>
                            <p class="mt-1 text-lg font-semibold text-amber">Signed DMG</p>
                        </div>
                        <div class="rounded-2xl border border-white/15 bg-black/25 px-4 py-3 backdrop-blur-md">
                            <p class="text-xs uppercase tracking-[0.16em] text-white/50">Provider</p>
                            <p class="mt-1 text-lg font-semibold text-amber">Anthropic only</p>
                        </div>
                    </div>
                </div>

                <form id="waitlist-form"
                    class="reveal rounded-3xl border border-white/15 bg-black/30 p-6 backdrop-blur-md font-space">
                    <h2 class="text-xl font-semibold text-offwhite">Request private-beta access</h2>
                    <p class="mt-2 text-sm text-white/70">
                        Share your work email. We will send install access and onboarding notes.
                    </p>

                    <label class="mt-5 block text-sm text-white/80">
                        Name
                        <input type="text" id="wl-name" required
                            class="hover-target mt-2 w-full rounded-xl border border-white/20 bg-black/40 px-3 py-2 text-sm outline-none focus:border-orange transition-colors"
                            placeholder="Jane Doe" autocomplete="name" />
                    </label>

                    <label class="mt-4 block text-sm text-white/80">
                        Work email
                        <input type="email" id="wl-email" required
                            class="hover-target mt-2 w-full rounded-xl border border-white/20 bg-black/40 px-3 py-2 text-sm outline-none focus:border-orange transition-colors"
                            placeholder="jane@company.com" autocomplete="email" />
                    </label>

                    <label class="mt-4 block text-sm text-white/80">
                        Primary use case
                        <textarea id="wl-usecase"
                            class="hover-target mt-2 h-24 w-full resize-none rounded-xl border border-white/20 bg-black/40 px-3 py-2 text-sm outline-none focus:border-orange transition-colors"
                            placeholder="Slack triage, email drafting, calendar updates..."></textarea>
                    </label>

                    <button type="submit" id="wl-submit"
                        class="hover-target mt-5 w-full rounded-xl bg-white px-4 py-2.5 text-sm font-bold text-black disabled:cursor-not-allowed disabled:opacity-50 transition-colors hover:bg-orange">
                        Join Waitlist
                    </button>

                    <p id="wl-message" class="mt-3 text-sm hidden"></p>
                </form>
            </div>
        </section>

        <!-- SUPPORTED APPS SECTION -->
        <section id="supported-apps"
            class="mx-auto max-w-6xl px-6 pb-24 md:px-10 relative z-20 pointer-events-auto reveal font-space">
            <div class="overflow-hidden rounded-3xl border border-white/10 bg-black/25 backdrop-blur-md">
                <div
                    class="grid grid-cols-[1.2fr_0.6fr_1.2fr] border-b border-white/10 px-5 py-3 text-xs uppercase tracking-[0.18em] text-white/55">
                    <p>App</p>
                    <p>Status</p>
                    <p>Coverage</p>
                </div>

                <div
                    class="grid grid-cols-[1.2fr_0.6fr_1.2fr] border-b border-white/5 px-5 py-3 text-sm text-white/80 hover:bg-white/5 transition-colors">
                    <p>Safari / Chrome</p>
                    <p class="text-orange">Supported</p>
                    <p class="text-white/65">Open URL, search, tab navigation</p>
                </div>
                <div
                    class="grid grid-cols-[1.2fr_0.6fr_1.2fr] border-b border-white/5 px-5 py-3 text-sm text-white/80 hover:bg-white/5 transition-colors">
                    <p>Slack</p>
                    <p class="text-orange">Supported</p>
                    <p class="text-white/65">Draft and reply with confirmation</p>
                </div>
                <div
                    class="grid grid-cols-[1.2fr_0.6fr_1.2fr] border-b border-white/5 px-5 py-3 text-sm text-white/80 hover:bg-white/5 transition-colors">
                    <p>Mail / Gmail</p>
                    <p class="text-orange">Supported</p>
                    <p class="text-white/65">Draft + guarded send flow</p>
                </div>
                <div
                    class="grid grid-cols-[1.2fr_0.6fr_1.2fr] border-b border-white/5 px-5 py-3 text-sm text-white/80 hover:bg-white/5 transition-colors">
                    <p>Finder</p>
                    <p class="text-orange">Supported</p>
                    <p class="text-white/65">Create, rename, move, navigate</p>
                </div>
                <div
                    class="grid grid-cols-[1.2fr_0.6fr_1.2fr] px-5 py-3 text-sm text-white/80 hover:bg-white/5 transition-colors">
                    <p>Calendar</p>
                    <p class="text-orange">Supported</p>
                    <p class="text-white/65">Create and update events</p>
                </div>
            </div>
        </section>
        <footer class="w-full py-6 border-t border-white/10 bg-black/50 backdrop-blur-md relative z-20 hover-target">
            <div class="overflow-hidden whitespace-nowrap">
                <div class="marquee-container font-space text-lg md:text-xl tracking-widest text-white/40 uppercase">
                    <span>voice → plan → action &nbsp; • &nbsp; macOS native &nbsp; • &nbsp; always listening &nbsp; •
                        &nbsp; privacy first &nbsp; • &nbsp; </span>
                    <span>voice → plan → action &nbsp; • &nbsp; macOS native &nbsp; • &nbsp; always listening &nbsp; •
                        &nbsp; privacy first &nbsp; • &nbsp; </span>
                    <span>voice → plan → action &nbsp; • &nbsp; macOS native &nbsp; • &nbsp; always listening &nbsp; •
                        &nbsp; privacy first &nbsp; • &nbsp; </span>
                    <span>voice → plan → action &nbsp; • &nbsp; macOS native &nbsp; • &nbsp; always listening &nbsp; •
                        &nbsp; privacy first &nbsp; • &nbsp; </span>
                </div>
            </div>
        </footer>

    </main>

    <!-- JS Logic -->
    <script>
        // Ensure scripts load before running
        window.addEventListener('load', init);

        function init() {

            // --- 0. CUSTOM CURSOR & MAGNETIC TILTS ---
            const cursor = document.getElementById('cursor');

            let mouseX = window.innerWidth / 2;
            let mouseY = window.innerHeight / 2;

            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });

            // Smooth 60fps cursor following using requestAnimationFrame
            let cursorX = mouseX;
            let cursorY = mouseY;
            const animateCursor = () => {
                cursorX += (mouseX - cursorX) * 0.2;
                cursorY += (mouseY - cursorY) * 0.2;
                cursor.style.transform = `translate3d(${cursorX}px, ${cursorY}px, 0) translate(-50%, -50%)`;
                requestAnimationFrame(animateCursor);
            };
            animateCursor();

            const hoverElements = document.querySelectorAll('.hover-target, button, a');
            hoverElements.forEach(el => {
                el.addEventListener('mouseenter', () => cursor.classList.add('cursor-active'));
                el.addEventListener('mouseleave', () => cursor.classList.remove('cursor-active'));
            });

            // Card Tilt Parallax effect
            const tilts = document.querySelectorAll('.bento-card');
            tilts.forEach(card => {
                card.addEventListener('mousemove', e => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;

                    const rotateX = ((y - centerY) / centerY) * -5;
                    const rotateY = ((x - centerX) / centerX) * 5;

                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-6px) scale3d(1.02, 1.02, 1.02)`;
                });
                card.addEventListener('mouseleave', () => {
                    card.style.transform = `perspective(1000px) rotateX(0deg) rotateY(0deg) translateY(0px) scale3d(1, 1, 1)`;
                });
            });


            // --- 1. THREE.JS SETUP ---
            const container = document.getElementById('webgl-container');

            // Renderers
            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            // Crucial: allow background scene to render first without clearing
            renderer.autoClear = false;
            container.appendChild(renderer.domElement);

            // Global Uniforms
            const time = { value: 0 };
            const mouseVec = { value: new THREE.Vector2(0, 0) };

            // Mouse tracking for Three.js
            window.addEventListener('mousemove', (e) => {
                mouseVec.value.x = (e.clientX / window.innerWidth) * 2 - 1;
                mouseVec.value.y = -(e.clientY / window.innerHeight) * 2 + 1;
            });

            // --- 2. BACKGROUND SCENE (Shaders) ---
            const bgScene = new THREE.Scene();
            const bgCamera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);

            const bgMaterial = new THREE.ShaderMaterial({
                uniforms: {
                    uTime: time,
                    uResolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) }
                },
                vertexShader: `
                    varying vec2 vUv;
                    void main() {
                        vUv = uv;
                        gl_Position = vec4(position, 1.0);
                    }
                `,
                fragmentShader: `
                    uniform float uTime;
                    uniform vec2 uResolution;
                    varying vec2 vUv;
                    
                    void main() {
                        vec2 uv = gl_FragCoord.xy / uResolution.xy;
                        vec3 color = vec3(0.04, 0.04, 0.04); // #0A0A0A
                        
                        // Audio Waveform logic
                        for(float i = 0.0; i < 3.0; i++) {
                            float speed = uTime * (0.8 + i * 0.2);
                            float amplitude = 0.05 + i * 0.02;
                            float frequency = 3.0 + i * 2.0;
                            
                            // Combine sine waves for organic fluid look
                            float y = uv.y + sin(uv.x * frequency + speed) * amplitude * sin(uv.x * (frequency * 2.0) - speed * 0.5);
                            
                            // Distance to line
                            float dist = abs(0.5 - y);
                            
                            // Glow calculation
                            float glow = 0.002 / (dist + 0.001);
                            
                            // Mix colors: Orange and Amber
                            vec3 waveColor = mix(vec3(1.0, 0.42, 0.0), vec3(1.0, 0.7, 0.28), i/2.0);
                            
                            color += waveColor * glow * (0.5 - i*0.1);
                        }
                        
                        // Add subtle vignette
                        float vignette = length(uv - 0.5);
                        color -= vignette * 0.3;
                        
                        gl_FragColor = vec4(color, 1.0);
                    }
                `,
                depthWrite: false,
                depthTest: false
            });
            const bgQuad = new THREE.Mesh(new THREE.PlaneGeometry(2, 2), bgMaterial);
            bgScene.add(bgQuad);

            // --- 3. MAIN 3D SCENE (Objects) ---
            const mainScene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 100);
            camera.position.z = 10;

            // Lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
            mainScene.add(ambientLight);
            const pointLight = new THREE.PointLight(0xFF6B00, 2, 50);
            pointLight.position.set(5, 5, 5);
            mainScene.add(pointLight);

            // A) Hero Orb
            const orbGeo = new THREE.IcosahedronGeometry(2, 64);
            const orbMat = new THREE.ShaderMaterial({
                uniforms: {
                    uTime: time,
                    uMouse: mouseVec,
                    uColor1: { value: new THREE.Color(0xFF6B00) }, // Orange
                    uColor2: { value: new THREE.Color(0xFFB347) }  // Amber
                },
                vertexShader: `
                    varying vec2 vUv;
                    varying vec3 vNormal;
                    varying vec3 vPosition;
                    uniform float uTime;
                    uniform vec2 uMouse;

                    // Pseudo-random noise
                    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
                    vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
                    vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
                    vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }

                    float snoise(vec3 v) {
                        const vec2  C = vec2(1.0/6.0, 1.0/3.0);
                        const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
                        vec3 i  = floor(v + dot(v, C.yyy) );
                        vec3 x0 = v - i + dot(i, C.xxx) ;
                        vec3 g = step(x0.yzx, x0.xyz);
                        vec3 l = 1.0 - g;
                        vec3 i1 = min( g.xyz, l.zxy );
                        vec3 i2 = max( g.xyz, l.zxy );
                        vec3 x1 = x0 - i1 + C.xxx;
                        vec3 x2 = x0 - i2 + C.yyy;
                        vec3 x3 = x0 - D.yyy;
                        i = mod289(i); 
                        vec4 p = permute( permute( permute( 
                                    i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
                                  + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
                                  + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
                        float n_ = 0.142857142857;
                        vec3  ns = n_ * D.wyz - D.xzx;
                        vec4 j = p - 49.0 * floor(p * ns.z * ns.z);
                        vec4 x_ = floor(j * ns.z);
                        vec4 y_ = floor(j - 7.0 * x_ );
                        vec4 x = x_ *ns.x + ns.yyyy;
                        vec4 y = y_ *ns.x + ns.yyyy;
                        vec4 h = 1.0 - abs(x) - abs(y);
                        vec4 b0 = vec4( x.xy, y.xy );
                        vec4 b1 = vec4( x.zw, y.zw );
                        vec4 s0 = floor(b0)*2.0 + 1.0;
                        vec4 s1 = floor(b1)*2.0 + 1.0;
                        vec4 sh = -step(h, vec4(0.0));
                        vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
                        vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
                        vec3 p0 = vec3(a0.xy,h.x);
                        vec3 p1 = vec3(a0.zw,h.y);
                        vec3 p2 = vec3(a1.xy,h.z);
                        vec3 p3 = vec3(a1.zw,h.w);
                        vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
                        p0 *= norm.x; p1 *= norm.y; p2 *= norm.z; p3 *= norm.w;
                        vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
                        m = m * m;
                        return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3) ) );
                    }

                    void main() {
                        vUv = uv;
                        vNormal = normal;
                        
                        // Wobble
                        float noise = snoise(vec3(position.x * 1.5 + uTime * 0.5, position.y * 1.5, position.z * 1.5 + uTime));
                        vec3 newPosition = position + normal * noise * 0.3;
                        
                        // Mouse parallax subtly moving the vertices
                        newPosition.x += uMouse.x * 0.5;
                        newPosition.y += uMouse.y * 0.5;
                        
                        vPosition = newPosition;
                        gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);
                    }
                `,
                fragmentShader: `
                    varying vec3 vNormal;
                    varying vec3 vPosition;
                    uniform vec3 uColor1;
                    uniform vec3 uColor2;
                    uniform float uTime;
                    
                    void main() {
                        vec3 viewDirection = normalize(cameraPosition - vPosition);
                        float fresnel = dot(viewDirection, normalize(vNormal));
                        fresnel = clamp(1.0 - fresnel, 0.0, 1.0);
                        fresnel = pow(fresnel, 2.5);
                        
                        // Base core dark, glowing edges
                        vec3 color = mix(vec3(0.0), mix(uColor1, uColor2, sin(uTime)*0.5+0.5), fresnel * 1.5);
                        
                        // Output
                        gl_FragColor = vec4(color, fresnel * 0.9);
                    }
                `,
                transparent: true,
                blending: THREE.AdditiveBlending,
                depthWrite: false
            });
            const orb = new THREE.Mesh(orbGeo, orbMat);
            // Position it to the right for desktop, center for mobile
            orb.position.set(window.innerWidth > 768 ? 3 : 0, 0, 0);
            mainScene.add(orb);

            // B) Diagram Nodes (How it works section)
            // Positioned lower down the Y axis, camera will scroll to them
            const diagramGroup = new THREE.Group();
            diagramGroup.position.set(0, -20, 0); // Spaced out
            mainScene.add(diagramGroup);

            // Node geometries
            const nodeMat = new THREE.MeshBasicMaterial({ color: 0xFF6B00, wireframe: true, transparent: true, opacity: 0.5 });

            // Voice Node (Icosahedron)
            const n1Geo = new THREE.IcosahedronGeometry(0.8, 1);
            const node1 = new THREE.Mesh(n1Geo, nodeMat);
            node1.position.set(-5, 0, 0);
            diagramGroup.add(node1);

            // Plan Node (Torus)
            const n2Geo = new THREE.TorusGeometry(0.6, 0.3, 16, 32);
            const node2 = new THREE.Mesh(n2Geo, nodeMat);
            node2.position.set(0, 1, -2);
            diagramGroup.add(node2);

            // Action Node (Box)
            const n3Geo = new THREE.BoxGeometry(1.2, 1.2, 1.2);
            const node3 = new THREE.Mesh(n3Geo, nodeMat);
            node3.position.set(5, -1, 0);
            diagramGroup.add(node3);

            // Connecting Curves
            const curve1 = new THREE.QuadraticBezierCurve3(node1.position, new THREE.Vector3(-2.5, 2, -1), node2.position);
            const curve2 = new THREE.QuadraticBezierCurve3(node2.position, new THREE.Vector3(2.5, 0, -1), node3.position);

            // Line material
            const lineMat = new THREE.LineBasicMaterial({ color: 0xFFB347, transparent: true, opacity: 0.3 });
            const points1 = curve1.getPoints(50);
            const line1 = new THREE.Line(new THREE.BufferGeometry().setFromPoints(points1), lineMat);
            diagramGroup.add(line1);

            const points2 = curve2.getPoints(50);
            const line2 = new THREE.Line(new THREE.BufferGeometry().setFromPoints(points2), lineMat);
            diagramGroup.add(line2);

            // Moving Particle along curve
            const particleGeo = new THREE.SphereGeometry(0.15, 16, 16);
            const particleMat = new THREE.MeshBasicMaterial({ color: 0xffffff });
            const dataParticle = new THREE.Mesh(particleGeo, particleMat);
            diagramGroup.add(dataParticle);

            // --- 4. RESIZE HANDLER ---
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
                bgMaterial.uniforms.uResolution.value.set(window.innerWidth, window.innerHeight);
                // Adjust orb position on resize
                orb.position.set(window.innerWidth > 768 ? 3 : 0, 0, 0);
            });

            // --- 5. RENDER LOOP ---
            const clock = new THREE.Clock();
            function render() {
                const t = clock.getElapsedTime();
                time.value = t;

                // Rotate Orb
                orb.rotation.y = t * 0.1;
                orb.rotation.z = t * 0.05;

                // Rotate Diagram nodes
                node1.rotation.y = t * 0.5;
                node2.rotation.x = t * 0.5;
                node2.rotation.y = t * 0.3;
                node3.rotation.y = t * 0.5;
                node3.rotation.z = t * 0.2;

                // Animate Particle along curves
                const cycle = (t * 0.5) % 2.0; // 0 to 2
                if (cycle < 1.0) {
                    dataParticle.position.copy(curve1.getPointAt(cycle));
                } else {
                    dataParticle.position.copy(curve2.getPointAt(cycle - 1.0));
                }

                // Render Background first (depthWrite is false), then main scene
                renderer.clear();
                renderer.render(bgScene, bgCamera);
                renderer.clearDepth();
                renderer.render(mainScene, camera);

                requestAnimationFrame(render);
            }
            render();

            // --- 6. GSAP SCROLL & ANIMATIONS ---
            gsap.registerPlugin(ScrollTrigger);

            // A) Move Camera in 3D Space based on Scroll
            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: "main",
                    start: "top top",
                    end: "bottom bottom",
                    scrub: 1
                }
            });

            // Scroll to Diagram section: Camera moves down
            tl.to(camera.position, {
                y: -20,
                z: 8,
                ease: "none"
            }, 0);

            // Orb fades/moves out slightly as we scroll down
            tl.to(orb.position, {
                y: 10,
                ease: "none"
            }, 0);

            // B) DOM Element Reveals
            gsap.utils.toArray('.reveal').forEach(elem => {
                gsap.fromTo(elem,
                    { autoAlpha: 0, y: 40 },
                    {
                        autoAlpha: 1,
                        y: 0,
                        duration: 1.2,
                        ease: "power3.out",
                        scrollTrigger: {
                            trigger: elem,
                            start: "top 85%",
                        }
                    }
                );
            });

            // C) Anime.js Number Counters (Bento Grid)
            ScrollTrigger.create({
                trigger: "#bento",
                start: "top 70%",
                onEnter: () => {
                    anime({
                        targets: '.count-ms',
                        innerHTML: [0, 12],
                        round: 1,
                        duration: 2500,
                        easing: 'easeOutExpo'
                    });
                    anime({
                        targets: '.count-apps',
                        innerHTML: [0, 85],
                        round: 1,
                        duration: 3000,
                        easing: 'easeOutExpo'
                    });
                    anime({
                        targets: '.count-context',
                        innerHTML: [0, 100],
                        round: 1,
                        duration: 2000,
                        easing: 'easeOutExpo'
                    });
                },
                once: true
            });

            // --- 7. MAGNETIC BUTTON & PARTICLE BURST ---
            const magWrap = document.getElementById('cta-button-wrap');
            const magBtn = document.getElementById('cta-button');

            magWrap.addEventListener('mousemove', (e) => {
                const rect = magWrap.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;

                // Move button slightly towards mouse
                gsap.to(magBtn, {
                    x: x * 0.4,
                    y: y * 0.4,
                    duration: 0.3,
                    ease: "power2.out"
                });
            });

            magWrap.addEventListener('mouseleave', () => {
                // Snap back
                gsap.to(magBtn, {
                    x: 0,
                    y: 0,
                    duration: 0.8,
                    ease: "elastic.out(1, 0.3)"
                });
            });

            // Burst Effect on Hover
            magWrap.addEventListener('mouseenter', () => {
                const rect = magBtn.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;

                for (let i = 0; i < 20; i++) {
                    const p = document.createElement('div');
                    p.classList.add('fixed', 'w-3', 'h-3', 'bg-orange', 'rounded-full', 'pointer-events-none', 'z-50');
                    p.style.left = centerX + 'px';
                    p.style.top = centerY + 'px';
                    // Use mix blend mode for the particles too
                    p.style.mixBlendMode = 'screen';
                    document.body.appendChild(p);

                    const angle = Math.random() * Math.PI * 2;
                    const radius = 60 + Math.random() * 80;

                    anime({
                        targets: p,
                        translateX: Math.cos(angle) * radius,
                        translateY: Math.sin(angle) * radius,
                        scale: [1, 0],
                        opacity: [1, 0],
                        duration: 800 + Math.random() * 600,
                        easing: 'easeOutExpo',
                        complete: () => p.remove()
                    });
                }
            });

        }
    </script>
</body>

</html>